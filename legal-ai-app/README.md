# ü§ñ Legal AI Assistant

**Sistema inteligente de an√°lisis y generaci√≥n de documentos legales con IA**

Una aplicaci√≥n completa de inteligencia artificial para el sector legal que combina an√°lisis predictivo de sentencias, b√∫squeda vectorial de jurisprudencia, y generaci√≥n autom√°tica de documentos legales.

## ‚ö° Quick Start

### Opci√≥n 1: Solo Backend (API)
```bash
cd backend
pip install -r requirements.txt
cp .env.example .env
# Editar .env con tus credenciales
python init_db.py
uvicorn main:app --reload
```
API disponible en: `http://localhost:8000/docs`

### Opci√≥n 2: Aplicaci√≥n Completa (Backend + Frontend)
```bash
# 1. Iniciar backend (como arriba)
# 2. Abrir frontend/index.html en tu navegador
# 3. ¬°Listo! Interfaz web completa funcionando
```

## üöÄ Caracter√≠sticas Principales

### üîç An√°lisis Predictivo de Sentencias
- **Modelo h√≠brido ML**: Combina embeddings legales con clasificaci√≥n supervisada
- **Predicci√≥n de resultados**: Estima el resultado probable de casos legales
- **Explicabilidad (XAI)**: Proporciona fundamentos para las predicciones
- **Casos similares**: Encuentra jurisprudencia relevante autom√°ticamente

### üîé B√∫squeda Inteligente de Jurisprudencia
- **B√∫squeda vectorial**: Utiliza FAISS para b√∫squedas ultra-r√°pidas
- **Embeddings legales**: Modelos especializados en lenguaje jur√≠dico
- **Filtros avanzados**: Por tribunal, materia, fecha, similitud
- **Ranking inteligente**: Resultados ordenados por relevancia

### üìÑ Generaci√≥n de Documentos Legales
- **Plantillas inteligentes**: Sistema de plantillas con placeholders
- **IA generativa**: Integraci√≥n con GPT-4/Claude para mejora de contenido
- **Citaciones autom√°ticas**: Incorpora jurisprudencia relevante
- **M√∫ltiples tipos**: Demandas, contestaciones, recursos, etc.

### üìä Gesti√≥n de Casos
- **Organizaci√≥n por expedientes**: Sistema completo de gesti√≥n de casos
- **Documentos asociados**: Vinculaci√≥n autom√°tica de documentos
- **Seguimiento temporal**: Historial completo de cada caso
- **Estad√≠sticas**: M√©tricas y an√°lisis de cartera

## üèóÔ∏è Arquitectura T√©cnica

### Backend
- **FastAPI**: API moderna y r√°pida con documentaci√≥n autom√°tica
- **PostgreSQL**: Base de datos robusta para datos legales
- **Redis**: Cache y sesiones de usuario
- **SQLAlchemy**: ORM para gesti√≥n de base de datos

### Machine Learning
- **Sentence Transformers**: Embeddings especializados en texto legal
- **FAISS**: √çndice vectorial para b√∫squedas ultra-r√°pidas
- **Scikit-learn**: Clasificaci√≥n supervisada de resultados legales
- **NLTK/Spacy**: Procesamiento de lenguaje natural

### IA Generativa
- **OpenAI GPT-4**: Generaci√≥n y mejora de documentos
- **Anthropic Claude**: Alternativa para generaci√≥n de contenido
- **LangChain**: Framework para aplicaciones de IA

### Integraci√≥n
- **Google Drive API**: Sincronizaci√≥n autom√°tica de datos
- **JWT**: Autenticaci√≥n segura de usuarios
- **CORS**: Soporte para frontend web

## üìã Requisitos del Sistema

### Software
- Python 3.8+
- PostgreSQL 12+
- Redis 6+

### Hardware Recomendado
- **Desarrollo**: 8GB RAM, 4 cores
- **Producci√≥n**: 16GB+ RAM, 8+ cores
- **Almacenamiento**: 50GB+ para modelos ML

## üõ†Ô∏è Instalaci√≥n y Configuraci√≥n

### 1. Clonar el Repositorio
```bash
git clone <repository-url>
cd legal-ai-app
```

### 2. Configurar Entorno Virtual
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# o
venv\Scripts\activate     # Windows
```

### 3. Instalar Dependencias
```bash
cd backend
pip install -r requirements.txt
```

### 4. Configurar Variables de Entorno
```bash
cp .env.example .env
```

Editar `.env` con tus credenciales:
```env
# JWT
JWT_SECRET=tu-clave-secreta-super-segura

# Base de Datos
DATABASE_URL=postgresql://usuario:password@localhost:5432/legal_ai_db

# Redis
REDIS_URL=redis://localhost:6379

# Google Drive API
GOOGLE_DRIVE_CLIENT_ID=tu-client-id
GOOGLE_DRIVE_CLIENT_SECRET=tu-client-secret

# IA Models
OPENAI_API_KEY=tu-openai-key
ANTHROPIC_API_KEY=tu-anthropic-key
```

### 5. Configurar Google Drive API

#### Obtener Credenciales
1. Ve a [Google Cloud Console](https://console.cloud.google.com/)
2. Crea un nuevo proyecto o selecciona uno existente
3. Habilita la API de Google Drive
4. Crea credenciales OAuth 2.0
5. Descarga el archivo `client_secrets.json`

#### Configurar Credenciales
```bash
# Coloca el archivo en el directorio backend/
cp client_secrets.json backend/
```

### 6. Inicializar Base de Datos
```bash
cd backend
python init_db.py
```

### 7. Sincronizar Datos desde Google Drive
```bash
python sync_data.py
```

### 8. Ejecutar la Aplicaci√≥n
```bash
uvicorn main:app --reload
```

## üåê Frontend Integrado

### Caracter√≠sticas del Frontend
- **Interfaz Moderna**: Dise√±o responsivo con CSS moderno y JavaScript ES6+
- **Funcionalidades Completas**: Todas las funcionalidades del backend integradas
- **Autenticaci√≥n**: Sistema completo de login/registro con JWT
- **UX Intuitiva**: Navegaci√≥n clara y feedback visual para el usuario

### Archivos del Frontend
```
frontend/
‚îú‚îÄ‚îÄ index.html          # P√°gina principal de la aplicaci√≥n
‚îú‚îÄ‚îÄ styles.css          # Estilos CSS con variables y dise√±o responsivo
‚îú‚îÄ‚îÄ script.js           # L√≥gica JavaScript de la aplicaci√≥n
‚îî‚îÄ‚îÄ README.md           # Documentaci√≥n del frontend
```

### Uso del Frontend
1. **Desarrollo Local**: Abrir `frontend/index.html` en tu navegador
2. **Producci√≥n**: Subir la carpeta `frontend/` a tu servidor web
3. **Configuraci√≥n**: Modificar `script.js` para cambiar la URL del backend

### Integraci√≥n con Backend
- El frontend se comunica autom√°ticamente con el backend a trav√©s de la API REST
- Soporte completo para JWT y autenticaci√≥n
- Manejo de errores y estados de carga
- Notificaciones toast para feedback del usuario

## üöÄ Despliegue en Producci√≥n

### Render
1. Conecta tu repositorio GitHub
2. Configura las variables de entorno
3. Selecciona Python como runtime
4. Build command: `pip install -r requirements.txt`
5. Start command: `uvicorn main:app --host 0.0.0.0 --port $PORT`

### Railway
1. Conecta tu repositorio
2. Configura variables de entorno
3. Railway detectar√° autom√°ticamente Python
4. Deploy autom√°tico en cada push

### Variables de Entorno de Producci√≥n
```env
DEBUG=False
HOST=0.0.0.0
PORT=8000
JWT_SECRET=clave-super-secreta-de-produccion
DATABASE_URL=postgresql://usuario:password@host:5432/db
REDIS_URL=redis://host:6379
```

## üìö Uso de la API

### Autenticaci√≥n
```bash
# Registrar usuario
curl -X POST "http://localhost:8000/api/v1/auth/register" \
  -H "Content-Type: application/json" \
  -d '{"email":"usuario@ejemplo.com","username":"usuario","full_name":"Usuario Ejemplo","password":"password123"}'

# Obtener token
curl -X POST "http://localhost:8000/api/v1/auth/token" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=usuario&password=password123"
```

### An√°lisis de Casos
```bash
# Predecir resultado de caso
curl -X POST "http://localhost:8000/api/v1/analysis/predict" \
  -H "Authorization: Bearer TU_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"case_description":"Caso de estafa...","case_type":"penal"}'
```

### B√∫squeda de Jurisprudencia
```bash
# B√∫squeda sem√°ntica
curl -X GET "http://localhost:8000/api/v1/search/semantic?query=estafa%20penal&limit=10" \
  -H "Authorization: Bearer TU_TOKEN"
```

### Generaci√≥n de Documentos
```bash
# Generar documento legal
curl -X POST "http://localhost:8000/api/v1/documents/generate" \
  -H "Authorization: Bearer TU_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"case_id":1,"document_type":"demanda","template_name":"Demanda","case_details":{"description":"..."}}'
```

## üîß Scripts de Utilidad

### Inicializaci√≥n de Base de Datos
```bash
python init_db.py
```
- Crea tablas de base de datos
- Establece usuario administrador
- Configura estructura inicial

### Sincronizaci√≥n de Datos
```bash
python sync_data.py
```
- Descarga documentos legales desde Google Drive
- Sincroniza plantillas de documentos
- Entrena modelos de ML
- Actualiza √≠ndices de b√∫squeda

## üìä Monitoreo y Mantenimiento

### Endpoints de Estado
- `/health` - Estado general de la aplicaci√≥n
- `/api/v1/analysis/model-status` - Estado de modelos ML
- `/api/v1/search/statistics` - Estad√≠sticas de b√∫squeda
- `/api/v1/data-sync/sync-status` - Estado de sincronizaci√≥n

### Logs
La aplicaci√≥n genera logs detallados para:
- Operaciones de sincronizaci√≥n
- Entrenamiento de modelos
- Errores y excepciones
- Rendimiento de b√∫squedas

## üß™ Testing

### Testing del Backend
```bash
# Instalar dependencias de testing
pip install pytest pytest-asyncio httpx

# Ejecutar tests
pytest
```

### Testing del Frontend
1. **Abrir en el navegador**: `frontend/index.html`
2. **Verificar funcionalidades**:
   - Navegaci√≥n entre secciones
   - Formularios de login/registro
   - Formularios de an√°lisis y b√∫squeda
   - Responsive design en diferentes tama√±os de pantalla

### Testing de la Aplicaci√≥n Completa
1. **Iniciar el backend**: `uvicorn main:app --reload`
2. **Abrir el frontend**: `frontend/index.html`
3. **Probar flujo completo**:
   - Registro de usuario
   - Login
   - An√°lisis de caso
   - B√∫squeda de jurisprudencia
   - Generaci√≥n de documento
   - Gesti√≥n de casos

### Tests Disponibles
- Tests de autenticaci√≥n
- Tests de an√°lisis de casos
- Tests de b√∫squeda
- Tests de generaci√≥n de documentos
- Tests de sincronizaci√≥n

## üîí Seguridad

### Autenticaci√≥n
- JWT tokens con expiraci√≥n configurable
- Hashing seguro de contrase√±as con bcrypt
- Control de acceso basado en roles

### Validaci√≥n de Datos
- Validaci√≥n Pydantic para todos los inputs
- Sanitizaci√≥n de texto de entrada
- Protecci√≥n contra inyecci√≥n SQL

### HTTPS
- Configuraci√≥n obligatoria en producci√≥n
- Headers de seguridad autom√°ticos
- CORS configurado apropiadamente

## ü§ù Contribuci√≥n

### Estructura del Proyecto
```
legal-ai-app/
‚îú‚îÄ‚îÄ backend/                 # Backend FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ main.py             # Aplicaci√≥n principal
‚îÇ   ‚îú‚îÄ‚îÄ config.py           # Configuraci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ models/             # Modelos de base de datos
‚îÇ   ‚îú‚îÄ‚îÄ services/           # Servicios de negocio
‚îÇ   ‚îú‚îÄ‚îÄ routers/            # Endpoints de API
‚îÇ   ‚îú‚îÄ‚îÄ ml_models/          # Modelos de machine learning
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt    # Dependencias Python
‚îú‚îÄ‚îÄ frontend/               # Frontend integrado y funcional
‚îÇ   ‚îú‚îÄ‚îÄ index.html          # P√°gina principal
‚îÇ   ‚îú‚îÄ‚îÄ styles.css          # Estilos CSS
‚îÇ   ‚îú‚îÄ‚îÄ script.js           # L√≥gica JavaScript
‚îÇ   ‚îî‚îÄ‚îÄ README.md           # Documentaci√≥n del frontend
‚îú‚îÄ‚îÄ data/                   # Datos y modelos
‚îú‚îÄ‚îÄ render.yaml             # Configuraci√≥n para Render
‚îú‚îÄ‚îÄ railway.json            # Configuraci√≥n para Railway
‚îú‚îÄ‚îÄ Procfile                # Configuraci√≥n para Heroku
‚îú‚îÄ‚îÄ Dockerfile              # Configuraci√≥n Docker (opcional)
‚îî‚îÄ‚îÄ README.md               # Este archivo
```

### Gu√≠as de Contribuci√≥n
1. Fork el repositorio
2. Crea una rama para tu feature
3. Implementa cambios con tests
4. Env√≠a un Pull Request
5. Espera revisi√≥n y merge

## üìû Soporte

### Documentaci√≥n
- **API Docs**: Disponible en `/docs` cuando la app est√© corriendo
- **ReDoc**: Documentaci√≥n alternativa en `/redoc`

### Issues
- Reporta bugs en GitHub Issues
- Incluye logs y pasos para reproducir
- Proporciona informaci√≥n del entorno

### Comunidad
- √önete a nuestro Discord/Slack
- Participa en discusiones de GitHub
- Comparte casos de uso y mejoras

## üìÑ Licencia

Este proyecto est√° bajo la licencia MIT. Ver `LICENSE` para m√°s detalles.

## üôè Agradecimientos

- **FastAPI** por el framework web excepcional
- **Hugging Face** por los modelos de transformers
- **Facebook Research** por FAISS
- **Google** por la API de Drive
- **OpenAI** y **Anthropic** por los modelos de IA

---

**¬°Construyamos el futuro del derecho juntos! üöÄ‚öñÔ∏è**